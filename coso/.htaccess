# # /coso/
#
# https://w3id.org/coso/ html request redirects to https://theskailab.github.io/COSO/contaminoso.html#
# 
#
# https://w3id.org/coso/ ttl request redirects to
# to https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_core.ttl for base request
# or to specific raw ontology files if specified
#
# ## Contact
# This space is administered by:
#
# Katrina Schweikert
# Github username: kschweikert
#
# Torsten Hahmann
# Github username: thahmann


# Turn off MultiViews
Options -MultiViews

RewriteEngine on


# Rewrite rule to serve directed HTML content from class/prop URIs
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
# To find the proper entity, we need to use the full identifier after the hash
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
# $ means end of string
RewriteRule ^$ https://github.com/SAWGraph/contaminoso  [R=303,L,NE]


# Rewrite rule to serve directed HTML content from class/prop URIs
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
# To find the proper entity, we need to use the full identifier after the hash
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
# $ means end of string
RewriteRule ^v1/contaminoso$ https://theSKAILab.github.io/COSO/contaminoso.html  [R=303,L,NE]

RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
# To find the proper entity, we need to use the full identifier after the hash
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteRule ^v1/contaminoso(.*)$ https://theSKAILab.github.io/COSO/contaminoso.html#http://w3id.org/coso/v1/contaminoso#$1  [R=303,L,NE]
#may need escape sequence \x23 to properly match the hash
#RewriteRule ^v1/contaminoso-full\x23 

# Rewrite rule to serve TTL content if specifically requested
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle 
RewriteRule $v1/contaminoso-full$ https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_full.ttl [R=303,L,NE]


# Rewrite rule to serve TTL content if specifically requested
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle 
RewriteRule $v1/contaminoso-stad-qudt$ https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_stad_qudt.ttl [R=303,L,NE]


# Rewrite rule to serve TTL content if specifically requested
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle 
RewriteRule ^v1/contaminoso(.*) https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_core.ttl [R=303,L,NE]



# Rewrite rule to serve TTL content if specifically requested
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle 
RewriteRule ^$ https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_full.ttl [R=303,L,NE]

# Rewrite rule to serve RDF (not in use currently)
#RewriteCond %{HTTP_ACCEPT} \*/\* [OR]
#RewriteCond %{HTTP_ACCEPT} application/rdf\+xml


# Default response
# -----------------------------
# Rewrite rule to serve ttl content by default
RewriteRule ^(.*)$ https://raw.githubusercontent.com/SAWGraph/contaminoso/refs/heads/main/v1/contaminoso_full.ttl [R=303,L,NE]


