Options +FollowSymLinks
RewriteEngine On
Options -MultiViews

# --- Minor translations for file endings ---
RewriteRule ^(.+)/$             $1 [R=302,NE,L]
RewriteRule ^(.+)\.owl$          $1.xml [R=302,NE,L]
RewriteRule ^(.+)\.jsonld$       $1.json [R=302,NE,L]

# --- Content negotiation (machine clients) ---
# Turtle
RewriteCond %{HTTP_ACCEPT} text/turtle
RewriteCond %{REQUEST_URI} !\.(ttl|json|xml|nt|html)$
RewriteRule ^$ latest/ontology.ttl [R=303,L]

# RDF/XML
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteCond %{REQUEST_URI} !\.(ttl|json|xml|nt|html)$
RewriteRule ^$ latest/ontology.rdf [R=303,L]

# JSON-LD
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteCond %{REQUEST_URI} !\.(ttl|json|xml|nt|html)$
RewriteRule ^$ latest/ontology.jsonld [R=303,L]

# N-Triples
RewriteCond %{HTTP_ACCEPT} application/n-triples
RewriteCond %{REQUEST_URI} !\.(ttl|json|xml|nt|html)$
RewriteRule ^$ latest/ontology.nt [R=303,L]

# --- Human-friendly redirects ---
# Root → latest HTML documentation
RewriteRule ^$ latest/index.html [R=302,L]

# /1.1.1 → specific version docs
RewriteRule ^([0-9]+\.[0-9]+\.[0-9]+)/?$ v/$1/docs/index.html [R=302,L]

# /latest → latest docs (resolves symbolic link)
RewriteRule ^latest/?$ latest/index.html [R=302,L]
