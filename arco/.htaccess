Header set Access-Control-Allow-Origin *
Options +FollowSymLinks
RewriteEngine on

SetEnvIf Request_URI ^.*$ ROOT_URL=https://raw.githubusercontent.com/ICCD-MiBACT/ArCo/master/ArCo-release
SetEnvIf Request_URI ^.*$ LODE_URL=http://wit.istc.cnr.it/arco/lode/extract?url=

RewriteRule ^resource/(.+)$ http://wit.istc.cnr.it/lodview/resource/$1 [R=303,L]

RewriteRule ^ontology/([a-zA-Z-_0-9]+)/(.+)$ http://wit.istc.cnr.it/lodview/ontology/$1/$2 [R=303,L]

RewriteCond %{HTTP_ACCEPT} ^.*text/html.*$
RewriteRule ^ontology/([a-zA-Z-_0-9]+)(\-aligns)(/?)$ %{ENV:LODE_URL}%{ENV:ROOT_URL}/ontologie/$1/$1$2.owl [R=303,L]

RewriteRule ^ontology/([a-zA-Z-_0-9]+)(\-aligns)(/?)$ %{ENV:ROOT_URL}/ontologie/$1/$1$2.owl [R=303,L]

RewriteCond %{HTTP_ACCEPT} ^.*text/html.*$
RewriteRule ^ontology/([a-zA-Z-_0-9]+)(/)?$ %{ENV:LODE_URL}%{ENV:ROOT_URL}/ontologie/$1/$1.owl [R=303,L]

RewriteRule ^ontology/([a-zA-Z-_0-9]+)(/)?$ %{ENV:ROOT_URL}/ontologie/$1/$1.owl [R=303,L]

RewriteCond %{HTTP_ACCEPT} ^.*text/html.*$
RewriteRule ^pattern/([a-zA-Z-_0-9]+)(/)?$ %{ENV:LODE_URL}%{ENV:ROOT_URL}/ontologie/patterns/$1.owl [R=303,L]

RewriteRule ^pattern/([a-zA-Z-_0-9]+)(/)?$ %{ENV:ROOT_URL}/ontologie/pattern/$1.owl [R=303,L]

RewriteRule ^test/(.+)$ %{ENV:ROOT_URL}/test/$1 [R=303,L]
RewriteRule ^(.+)$ http://wit.istc.cnr.it/lodview/$1 [R=303,L]
RewriteRule ^$ http://wit.istc.cnr.it/arco [R=303,L] 
