############################################################################
### W3ID Configuration for Digital Product Passport (DPP) Ontology      ###
### Base URI: https://w3id.org/dpp/                                     ###
### Documentation: https://richzele.github.io/dpp-ontology-site//              ###
############################################################################

Options +FollowSymLinks
RewriteEngine on
RewriteBase /dpp/

############################################################################
# ALIGNMENT ONTOLOGY: dpp-dppo (version 0.1)
# URI: /dpp/alignment/dpp-dppo/
############################################################################

# JSON-LD for dpp-dppo alignment
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.jsonld [R=303,L]
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^alignment/dpp-dppo/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.jsonld [R=303,NE,L]

# HTML documentation for dpp-dppo alignment
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/index.html [R=303,L]
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^alignment/dpp-dppo/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/index.html#$1 [R=303,NE,L]

# RDF/XML for dpp-dppo alignment
RewriteCond %{HTTP_ACCEPT} \*/\* [OR]
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.owl [R=303,L]
RewriteCond %{HTTP_ACCEPT} \*/\* [OR]
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteRule ^alignment/dpp-dppo/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.owl [R=303,NE,L]

# Turtle for dpp-dppo alignment
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.ttl [R=303,L]
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^alignment/dpp-dppo/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.ttl [R=303,NE,L]

# N-Triples for dpp-dppo alignment
RewriteCond %{HTTP_ACCEPT} application/n-triples
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.nt [R=303,L]
RewriteCond %{HTTP_ACCEPT} application/n-triples
RewriteRule ^alignment/dpp-dppo/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.nt [R=303,NE,L]

# Default for dpp-dppo alignment
RewriteRule ^alignment/dpp-dppo/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dpp-dppo/0.1/ontology.owl [R=303,L]

############################################################################
# ALIGNMENT ONTOLOGY: dppo-ceon (version 0.1)
# URI: /dpp/alignment/dppo-ceon/
############################################################################

# JSON-LD for dppo-ceon alignment
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.jsonld [R=303,L]
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^alignment/dppo-ceon/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.jsonld [R=303,NE,L]

# HTML documentation for dppo-ceon alignment
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/index.html [R=303,L]
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^alignment/dppo-ceon/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/index.html#$1 [R=303,NE,L]

# RDF/XML for dppo-ceon alignment
RewriteCond %{HTTP_ACCEPT} \*/\* [OR]
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.owl [R=303,L]
RewriteCond %{HTTP_ACCEPT} \*/\* [OR]
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteRule ^alignment/dppo-ceon/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.owl [R=303,NE,L]

# Turtle for dppo-ceon alignment
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.ttl [R=303,L]
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^alignment/dppo-ceon/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.ttl [R=303,NE,L]

# N-Triples for dppo-ceon alignment
RewriteCond %{HTTP_ACCEPT} application/n-triples
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.nt [R=303,L]
RewriteCond %{HTTP_ACCEPT} application/n-triples
RewriteRule ^alignment/dppo-ceon/(.+)$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.nt [R=303,NE,L]

# Default for dppo-ceon alignment
RewriteRule ^alignment/dppo-ceon/?$ https://richzele.github.io/dpp-ontology-site//alignment-doc/dppo-ceon/0.1/ontology.owl [R=303,L]

############################################################################
# PRODUCT MODULE: /dpp/product (version 1.0)
############################################################################

# Turtle for product module
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^product/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/1_Product_Module_Protege_9.ttl [R=303,L]
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^product/(.+)$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/1_Product_Module_Protege_9.ttl [R=303,NE,L]

# HTML documentation for product module (redirect to main docs with anchor if needed)
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^product/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/1-product-module-9.html [R=303,L]
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^product/(.+)$ https://richzele.github.io/dpp-ontology-site//ontology-doc/index.html#$1 [R=303,NE,L]

# Default for product module
RewriteRule ^product/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/1_Product_Module_Protege_9.ttl [R=303,L]

############################################################################
# MATERIAL MODULE: /dpp/material (version 1.0)
############################################################################

# Turtle for material module
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^material/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/2_Material_Module_Protege_5.ttl [R=303,L]
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} text/\* [OR]
RewriteCond %{HTTP_ACCEPT} \*/turtle
RewriteRule ^material/(.+)$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/2_Material_Module_Protege_5.ttl [R=303,NE,L]

# HTML documentation for material module
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^material/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/2-material-module-5.html [R=303,L]
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^material/(.+)$ https://richzele.github.io/dpp-ontology-site//ontology-doc/index.html#$1 [R=303,NE,L]

# Default for material module
RewriteRule ^material/?$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/ontologies/2_Material_Module_Protege_5.ttl [R=303,L]

############################################################################
# MAIN DPP NAMESPACE: /dpp/ (version 1.0)
############################################################################

# HTML documentation for base DPP ontology
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/index.html [R=303,L]
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^(.+)$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/index.html#$1 [R=303,NE,L]

# Default fallback - HTML documentation
RewriteRule ^$ https://richzele.github.io/dpp-ontology-site//ontology-doc/1.0/index.html [R=303,L]